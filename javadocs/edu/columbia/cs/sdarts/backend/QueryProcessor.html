<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Frameset//EN""http://www.w3.org/TR/REC-html40/frameset.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc on Fri Aug 30 23:29:19 EDT 2002 -->
<TITLE>
SDARTS Server Specification: Class  QueryProcessor
</TITLE>
<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../../stylesheet.css" TITLE="Style">
</HEAD>
<BODY BGCOLOR="white">

<!-- ========== START OF NAVBAR ========== -->
<A NAME="navbar_top"><!-- --></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/QueryProcessor.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
SDARTS</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="LSPDocSorter.html"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="StandardQueryProcessor.html"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../index.html" TARGET="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="QueryProcessor.html" TARGET="_top"><B>NO FRAMES</B></A></FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY: &nbsp;INNER&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL: &nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<!-- =========== END OF NAVBAR =========== -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
edu.columbia.cs.sdarts.backend</FONT>
<BR>
Class  QueryProcessor</H2>
<PRE>
java.lang.Object
  |
  +--<B>edu.columbia.cs.sdarts.backend.QueryProcessor</B>
</PRE>
<DL>
<DT><B>Direct Known Subclasses:</B> <DD><A HREF="StandardQueryProcessor.html">StandardQueryProcessor</A></DD>
</DL>
<HR>
<DL>
<DT>public abstract class <B>QueryProcessor</B><DT>extends java.lang.Object</DL>

<P>
This abstract class should be used by back-end developers for processing
 queries, because it embodies the logic the STARTS specification follows.
 <p>
 A STARTS query consists primarily of a filter and a ranking (defined in SDARTS
 as <A HREF="../common/LSPFilter.html"><CODE>LSPFilter</CODE></A> and
 <A HREF="../common/LSPRanking.html"><CODE>LSPRanking</CODE></A>.
 It is altogether possible that an underlying collection cannot fulfill all
 the terms of the filter and ranking; in this case, STARTS returns that
 <i>actual filter and ranking</i> used when the query was processed - some
 best-effort approximation of the original.
 <p>
 What this class does is define a way of handling all of this. The programmer
 should simply call the <CODE>query()</CODE> method
 - this method automatically calls the abstract
 <CODE>setActualFilter()</CODE> and
 <CODE>setActualRanking()</CODE> methods.
 These modify the
 <code>LSPQuery</code>'s filter and ranking, accordingly. The method then calls the abstract
 <CODE>validateQuery()</CODE> method, which determines
 whether, after this modification, the query is valid. This validity should
 probably be tested against the collection's metaAttributes. If the query is
 valid, the method then passes the modified <code>LSPQuery</code>
 on to the abstract <CODE>queryImpl()</CODE> method,
 which would perform the actual querying. If not, <code>validateQuery()</code>
 should throw an exception describing what was wrong with the query.
 <p>
 In this way, the developer can control the rules for what rankings and filters
 are actually possible, modify the query before it actually gets to the
 underlying collection, and also have the actual filter and ranking available
 in the query for result processing.
 <p>
 <B>NOTE</B>: The <code>QueryProcessor</code> clones the incoming
 <code>LSPQuery</code> before passing it on to the other methods, since these
 methods do modify the query, and the original may be used at more than
 one <code>BackEndLSP</code>. A clone of an
 <code>LSPQuery</code> is <b>deep</b> for its <code>LSPFilter</code> and
 <code>LSPRanking</code> (i.e. the clone makes copies of these), and
 <b>shallow</b> for all other fields. A backend developer should avoid
 changing anything in a cloned <code>LSPQuery</code> other than filter
 and ranking.
<P>
<HR>

<P>
<!-- ======== INNER CLASS SUMMARY ======== -->


<!-- =========== FIELD SUMMARY =========== -->


<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="QueryProcessor.html#QueryProcessor()">QueryProcessor</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Method Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../common/LSPResults.html">LSPResults</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="QueryProcessor.html#query(edu.columbia.cs.sdarts.common.LSPQuery)">query</A></B>(<A HREF="../common/LSPQuery.html">LSPQuery</A>&nbsp;query)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This default implementation clones the <code>LSPQuery</code>,
 calls <code>setActualFilter()</code>
 on the clone, then <code>setActualRanking()</code>
 on the clone, then calls <code>validateQuery()</code, and then
 finally passes the modified query to the
 <code>queryImpl()</code> method.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected abstract &nbsp;<A HREF="../common/LSPResults.html">LSPResults</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="QueryProcessor.html#queryImpl(edu.columbia.cs.sdarts.common.LSPQuery)">queryImpl</A></B>(<A HREF="../common/LSPQuery.html">LSPQuery</A>&nbsp;query)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The abstract method where the query processing actually takes place.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected abstract &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="QueryProcessor.html#setActualFilter(edu.columbia.cs.sdarts.common.LSPQuery)">setActualFilter</A></B>(<A HREF="../common/LSPQuery.html">LSPQuery</A>&nbsp;query)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;An implementation of this method should look at the
 <code>LSPFilter</code> inside the <code>LSPQuery</code>
 and, if necessary, change it.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected abstract &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="QueryProcessor.html#setActualRanking(edu.columbia.cs.sdarts.common.LSPQuery)">setActualRanking</A></B>(<A HREF="../common/LSPQuery.html">LSPQuery</A>&nbsp;query)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;An implementation of this method should look at the
 <code>LSPFilter</code> inside the <code>LSPQuery</code>
 and, if necessary, change it.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected abstract &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="QueryProcessor.html#validateQuery(edu.columbia.cs.sdarts.common.LSPQuery)">validateQuery</A></B>(<A HREF="../common/LSPQuery.html">LSPQuery</A>&nbsp;query)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;An implementor of this method should throw an exception if the
 query is not valid, otherwise do nothing.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TD><B>Methods inherited from class java.lang.Object</B></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><clinit>, clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->


<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=1><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TD>
</TR>
</TABLE>

<A NAME="QueryProcessor()"><!-- --></A><H3>
QueryProcessor</H3>
<PRE>
public <B>QueryProcessor</B>()</PRE>
<DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=1><FONT SIZE="+2">
<B>Method Detail</B></FONT></TD>
</TR>
</TABLE>

<A NAME="query(edu.columbia.cs.sdarts.common.LSPQuery)"><!-- --></A><H3>
query</H3>
<PRE>
public <A HREF="../common/LSPResults.html">LSPResults</A> <B>query</B>(<A HREF="../common/LSPQuery.html">LSPQuery</A>&nbsp;query)
                 throws <A HREF="BackEndException.html">BackEndException</A></PRE>
<DL>
<DD>This default implementation clones the <code>LSPQuery</code>,
 calls <code>setActualFilter()</code>
 on the clone, then <code>setActualRanking()</code>
 on the clone, then calls <code>validateQuery()</code, and then
 finally passes the modified query to the
 <code>queryImpl()</code> method. In general this method
 should not be overridden, but it can be if necessary. Make sure
 that your overridden version <b>clones the query</b>.<DD><DL>
<DT><B>Parameters:</B><DD><CODE>query</CODE> - the query to be processed<DT><B>Returns:</B><DD>the results of the query<DT><B>Throws:</B><DD><CODE><code>BackEndException</code></CODE> - if something goes wrong,
 or the query is not valid.</DL>
</DD>
</DL>
<HR>

<A NAME="setActualFilter(edu.columbia.cs.sdarts.common.LSPQuery)"><!-- --></A><H3>
setActualFilter</H3>
<PRE>
protected abstract void <B>setActualFilter</B>(<A HREF="../common/LSPQuery.html">LSPQuery</A>&nbsp;query)
                                 throws <A HREF="BackEndException.html">BackEndException</A></PRE>
<DL>
<DD>An implementation of this method should look at the
 <code>LSPFilter</code> inside the <code>LSPQuery</code>
 and, if necessary, change it. It should
 throw a <code>BackEndException</code> if it cannot
 find an acceptable substitute for the
 <code>LSPFilter</code>.
 <p>
 The <code>set...()</code> methods on <code>LSPFilter</code>
 can be used for altering the filter. Alternatively,
 the filter can simply be replaced using the
 <CODE>setFilter()</CODE>
 method of <code>LSPQuery</code>.
 <p><DD><DL>
<DT><B>Parameters:</B><DD><CODE>query</CODE> - the <code>LSPQuery</code> to be checked<DT><B>Throws:</B><DD><CODE><code>BackEndException</code></CODE> - if a substitute
 cannot be found.</DL>
</DD>
</DL>
<HR>

<A NAME="setActualRanking(edu.columbia.cs.sdarts.common.LSPQuery)"><!-- --></A><H3>
setActualRanking</H3>
<PRE>
protected abstract void <B>setActualRanking</B>(<A HREF="../common/LSPQuery.html">LSPQuery</A>&nbsp;query)
                                  throws <A HREF="BackEndException.html">BackEndException</A></PRE>
<DL>
<DD>An implementation of this method should look at the
 <code>LSPFilter</code> inside the <code>LSPQuery</code>
 and, if necessary, change it. It should
 throw a <code>BackEndException</code> if it cannot
 find an acceptable substitute for the
 <code>LSPFilter</code>.
 <p>
 The <code>set...()</code> methods on <code>LSPRanking</code>
 can be used for altering the ranking. Alternatively,
 the filter can simply be replaced using the
 <CODE>setRanking()</CODE>
 method of <code>LSPQuery</code>.
 <p><DD><DL>
<DT><B>Parameters:</B><DD><CODE>query</CODE> - the <code>LSPQuery</code> to be checked<DT><B>Throws:</B><DD><CODE><code>BackEndException</code></CODE> - if a substitute
 cannot be found.</DL>
</DD>
</DL>
<HR>

<A NAME="queryImpl(edu.columbia.cs.sdarts.common.LSPQuery)"><!-- --></A><H3>
queryImpl</H3>
<PRE>
protected abstract <A HREF="../common/LSPResults.html">LSPResults</A> <B>queryImpl</B>(<A HREF="../common/LSPQuery.html">LSPQuery</A>&nbsp;query)
                                 throws <A HREF="BackEndException.html">BackEndException</A></PRE>
<DL>
<DD>The abstract method where the query processing actually takes place.
 It is this method, and not the <code>query()</code> method, that
 should be overridden. This is where code talking to the actual
 underlying collection should go.<DD><DL>
<DT><B>Parameters:</B><DD><CODE>query</CODE> - the query to be processed<DT><B>Returns:</B><DD>the results of the query<DT><B>Throws:</B><DD><CODE><code>BackEndException</code></CODE> - if something goes wrong</DL>
</DD>
</DL>
<HR>

<A NAME="validateQuery(edu.columbia.cs.sdarts.common.LSPQuery)"><!-- --></A><H3>
validateQuery</H3>
<PRE>
protected abstract void <B>validateQuery</B>(<A HREF="../common/LSPQuery.html">LSPQuery</A>&nbsp;query)
                               throws <A HREF="BackEndException.html">BackEndException</A></PRE>
<DL>
<DD>An implementor of this method should throw an exception if the
 query is not valid, otherwise do nothing.<DD><DL>
<DT><B>Throws:</B><DD><CODE><A HREF="BackEndException.html">BackEndException</A></CODE> - if the query is not valid</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>

<!-- ========== START OF NAVBAR ========== -->
<A NAME="navbar_bottom"><!-- --></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/QueryProcessor.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
SDARTS</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="LSPDocSorter.html"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="StandardQueryProcessor.html"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../index.html" TARGET="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="QueryProcessor.html" TARGET="_top"><B>NO FRAMES</B></A></FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY: &nbsp;INNER&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL: &nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<!-- =========== END OF NAVBAR =========== -->

<HR>
<a href="../../../../../../index.html" target="_top">Sdarts Homepage</a>
</BODY>
</HTML>

<!-- Localized -->